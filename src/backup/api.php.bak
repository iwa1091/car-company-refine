<?php

use Illuminate\Support\Facades\Route;

// Controllers
use App\Http\Controllers\Admin\BusinessHourController;
use App\Http\Controllers\Admin\AdminReservationController;
use App\Http\Controllers\Admin\AdminBlockController;
use App\Http\Controllers\Admin\ServiceController;
use App\Http\Controllers\Api\ReservationController as ApiReservationController;

/*
|--------------------------------------------------------------------------
| API Routesï¼ˆJSONã®ã¿ï¼‰
|--------------------------------------------------------------------------
| Inertia ãƒšãƒ¼ã‚¸ã¯ web.php ã§å‡¦ç†ã—ã¾ã™ã€‚
|--------------------------------------------------------------------------
*/

// ============================================================
// ğŸ•’ å–¶æ¥­æ™‚é–“è¨­å®š APIï¼ˆBusinessHourControllerï¼‰
// ============================================================
Route::prefix('business-hours')->group(function () {
    // ReservationList.jsx ãŒ /api/business-hours/weekly ã‚’å©ããŸã‚æ®‹ã™
    Route::get('/weekly', [BusinessHourController::class, 'getWeekly']);
    Route::put('/weekly', [BusinessHourController::class, 'updateWeekly']);

    // ReservationEdit.jsx ãŒ /api/business-hours ã‚’å©ããŸã‚æ®‹ã™
    Route::get('/', [BusinessHourController::class, 'getHours']);
    Route::put('/', [BusinessHourController::class, 'updateHours']);
});


// ============================================================
// ğŸ§‘â€ğŸ’¼ ç®¡ç†è€…å‘ã‘ APIï¼ˆReact ç®¡ç†ç”»é¢ fetch ç”¨ï¼‰
// ============================================================
Route::prefix('admin')->group(function () {

    // ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç† APIï¼ˆReactç®¡ç†ç”»é¢ç”¨ã«æ®‹ã™ï¼‰
    Route::get('services', [ServiceController::class, 'apiIndex']);
    Route::post('services', [ServiceController::class, 'apiStore']);
    Route::put('services/{service}', [ServiceController::class, 'apiUpdate']);
    Route::delete('services/{service}', [ServiceController::class, 'apiDestroy']);

    // äºˆç´„ä¸€è¦§/å‰Šé™¤ APIï¼ˆReservationList.jsx ãŒä½¿ç”¨ï¼‰
    Route::get('reservations', [AdminReservationController::class, 'apiIndex']);
    Route::delete('reservations/{id}', [AdminReservationController::class, 'apiDestroy']);

    // âœ… ã‚¿ã‚¤ãƒ ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ—¥åˆ¥ï¼‰
    // Timetable.jsx ãŒ /api/admin/timetable?date=YYYY-MM-DD ã‚’å©ã
    Route::get('timetable', [AdminReservationController::class, 'apiTimetable']);

    // âœ… ç®¡ç†è€…ãƒ–ãƒ­ãƒƒã‚¯ CRUD
    // Timetable.jsx ãŒ /api/admin/blocks... ã‚’å©ã
    Route::post('blocks', [AdminBlockController::class, 'store']);
    Route::put('blocks/{id}', [AdminBlockController::class, 'update']);
    Route::delete('blocks/{id}', [AdminBlockController::class, 'destroy']);
});


// ============================================================
// ğŸ§¾ ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘ APIï¼ˆäºˆç´„ãƒ•ã‚©ãƒ¼ãƒ ç”¨ï¼‰
// ============================================================
Route::get('/reservations/month-schedule', [ApiReservationController::class, 'monthSchedule']);

// ã‚µãƒ¼ãƒ“ã‚¹ä¸€è¦§ï¼ˆäºˆç´„ãƒ•ã‚©ãƒ¼ãƒ ãŒå‚ç…§ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒé«˜ã„ã®ã§æ®‹ã™ï¼‰
Route::get('/services', [ServiceController::class, 'apiList']);

// äºˆç´„ä½œæˆ
Route::post('/reservations', [ApiReservationController::class, 'store']);

// äºˆç´„å¯èƒ½æ™‚é–“ã®ãƒã‚§ãƒƒã‚¯
Route::get('/reservations/check', [ApiReservationController::class, 'checkAvailability']);
